# Research: Fix Missing Drag and Drop

**Date**: 2026-01-19

## 1. Executive Summary
The drag-and-drop feature is technically present in the code but architecturally misaligned. The `DragDropContext` and logic are set up to reorder the main `todos` list, but the UI components (`Draggable`/`Droppable`) are applied to the single-item `TodoList` view instead of the `TaskSidebar` where the full list resides.

## 2. Technical Context

### App.jsx
- **File**: `src/App.jsx`
- **Location**: `handleDragEnd` (Line 132) logic reorders `todos` array.
- **Problem**: `DragDropContext` wraps `TodoList` (Line 414), which is passed `todos={[selectedTodo]}`.

### TaskSidebar.jsx
- **File**: `src/TaskSidebar.jsx`
- **Location**: `sidebar-list` div (Line 21).
- **Current Implementation**: Maps `todos` to `<button>` elements. No `react-beautiful-dnd` integration.

### TodoList.jsx
- **File**: `src/TodoList.jsx`
- **Current Implementation**: Wraps content in `StrictModeDroppable` and maps items to `Draggable`.
- **Usage**: Used in `App.jsx` to render the *selected* todo details, not the list of todos.

## 3. Findings & Analysis
- **Disconnect**: The backend logic (`handleDragEnd`) expects to reorder the list of projects/tasks. The frontend UI (`TaskSidebar`) does not support dragging. The Detail View (`TodoList`) supports dragging but only contains 1 item, making dragging impossible/useless.
- **Fix Path**: 
    1. Lift `DragDropContext` to wrap `TaskSidebar`.
    2. Implement `StrictModeDroppable` and `Draggable` inside `TaskSidebar`.
    3. Remove `DragDropContext` from `TodoList` usage in `App.jsx` (or leave it if we want subtask reordering later, but for now it's confusing).

## 4. Technical Constraints
- `react-beautiful-dnd` requires `StrictModeDroppable` in React 18 strict mode.
- `Draggable` components need unique string IDs (`todo.id`).

## 5. Architecture Documentation
- `StrictModeDroppable` is available in `src/StrictModeDroppable.jsx`.
