# Fix Missing Drag and Drop Implementation Plan

## Overview
Enable drag-and-drop reordering for the main task list in the Sidebar by moving the DnD logic from the single-item Detail View to the Sidebar.

## Current State Analysis
- `App.jsx`: `DragDropContext` wraps `TodoList` (detail view). `handleDragEnd` reorders `todos`.
- `TaskSidebar.jsx`: Static list. No `react-beautiful-dnd` integration.

## Implementation Approach
- Lift `DragDropContext` in `App.jsx` to wrap the `TaskSidebar` component.
- Implement `StrictModeDroppable` and `Draggable` within `TaskSidebar.jsx`.

## Phase 1: Implement Draggable Sidebar (TaskSidebar.jsx)
### Overview
Make the sidebar list droppable and its items draggable.

### Changes Required:
#### 1. `src/TaskSidebar.jsx`
**Changes**:
- Import `Draggable` from `react-beautiful-dnd` and `StrictModeDroppable` from `./StrictModeDroppable`.
- Wrap the list content in `<StrictModeDroppable droppableId="sidebar-todos">`.
- Wrap each todo item in `<Draggable draggableId={todo.id} index={index}>`.
- Apply `provided.innerRef` and props correctly.

```jsx
import { Draggable } from 'react-beautiful-dnd';
import { StrictModeDroppable } from './StrictModeDroppable';

// ... inside render ...
<StrictModeDroppable droppableId="sidebar-todos">
  {(provided) => (
    <div className="sidebar-list" {...provided.droppableProps} ref={provided.innerRef} style={{ flexGrow: 1, overflowY: 'auto' }}>
      {todos.map((todo, index) => (
        <Draggable key={todo.id} draggableId={todo.id} index={index}>
          {(provided, snapshot) => (
            <div
              ref={provided.innerRef}
              {...provided.draggableProps}
              {...provided.dragHandleProps}
              style={{
                ...provided.draggableProps.style,
                marginBottom: '8px'
              }}
            >
              {/* Existing button content */}
            </div>
          )}
        </Draggable>
      ))}
      {provided.placeholder}
    </div>
  )}
</StrictModeDroppable>
```

## Phase 2: Wire Context in App (App.jsx)
### Overview
Move the DragDropContext to where the dragging actually happens.

### Changes Required:
#### 1. `src/App.jsx`
**Changes**:
- Remove `DragDropContext` from wrapping `TodoList`.
- Wrap `TaskSidebar` usage with `DragDropContext`.

```jsx
      <div className={`task-sidebar ${activeTab === 'archive' ? 'mobile-show' : 'mobile-hide'}`}>
        <DragDropContext onDragEnd={handleDragEnd}>
          <TaskSidebar
            todos={todos}
            selectedTodoId={selectedTodoId}
            onSelectTodo={setSelectedTodoId}
            onAddTodo={addTodo}
          />
        </DragDropContext>
      </div>
```

### Success Criteria:
#### Manual:
- [ ] Sidebar items can be dragged and reordered.
- [ ] Reordering updates the list persistently.
- [ ] No console errors regarding `Draggable` IDs.

## Finalize
- [ ] Verify functionality on both Desktop and Mobile.
