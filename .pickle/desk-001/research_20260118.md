# Research: Tauri & SQLite Migration

**Date**: 2026-01-19

## 1. Executive Summary
The goal is to migrate the current React + Vite application to a Tauri-based desktop app and replace `localStorage` with a SQLite database using the `tauri-plugin-sql`.

## 2. Technical Context
- **Frontend**: React 18, Vite 4.
- **Storage**: Currently uses `localStorage` keys `paper-todos` and `paper-activity-log`.
- **Target**: Windows (win32 OS identified in session start).

## 3. Findings & Analysis
- **Tauri Plugin SQL**: Provides a high-level JS API to interact with SQLite. This is better than writing raw Rust bridges for every single query.
- **Schema Design**: 
    - `todos` table: `id` (text, PK), `text` (text), `completed` (boolean), `image` (text/blob), `order_index` (integer).
    - `subtasks` table: `id` (text, PK), `todo_id` (text, FK), `text` (text), `completed` (boolean), `image` (text/blob), `order_index` (integer).
    - `activity_log` table: `date` (text, PK), `pts` (integer).
- **Migration Strategy**: 
    1. Scaffold Tauri.
    2. Add SQL plugin.
    3. Initialize DB on app start.
    4. Refactor `App.jsx` hooks to use DB queries.

## 4. Technical Constraints
- Rust toolchain must be installed on the host system (assuming user has it or I'll warn them).
- SQLite is local-only.

## 5. Architecture Documentation
- Current: Browser -> LocalStorage.
- Target: Tauri WebView -> Rust Core -> SQLite.
