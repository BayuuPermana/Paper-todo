# Sentient Workspace Protocol Implementation Plan

## Overview
Transform the application into a tactile, immersive workspace using Web Audio synthesis, a temporal undo buffer, and keyboard-first navigation.

## Current State Analysis
- `src/App.jsx`: Central state, no history, mouse-only mutations.
- `src/index.css`: Static styles, no physical transitions.
- `src/SubTaskItem.jsx`: Action-heavy UI with no audio feedback.

## Implementation Approach
1. **Acoustic Engine**: Create `src/utils/GodAudio.js`.
2. **Temporal Buffer**: Add `history` state to `App.jsx` and implement `undo()`.
3. **Neural Shortcuts**: Implement `useKeyboardShortcuts` hook in `App.jsx`.
4. **VFX**: Add `.crumple` animation to `index.css`.

## Phase 1: Acoustic & VFX Foundation
### Overview
Establish the sensory layers.

### Changes Required:
#### 1. `src/utils/GodAudio.js` (New File)
**Changes**: Synthesize Pencil, Rustle, and Crumple sounds.
```javascript
class GodAudio {
  constructor() {
    this.ctx = null;
  }
  init() { if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)(); }
  playPencil() { /* Noise + HPF + Envelope */ }
  playRustle() { /* Brown Noise + BPF + LFO */ }
  playCrumple() { /* Burst fire Noise */ }
}
export const audio = new GodAudio();
```

#### 2. `src/index.css`
**Changes**: Add `.crumple` keyframes.
```css
@keyframes crumple {
  0% { transform: scale(1) rotate(0); }
  50% { transform: scale(0.5) rotate(15deg) skew(10deg); opacity: 0.7; }
  100% { transform: scale(0) rotate(-30deg); opacity: 0; }
}
.crumple-active { animation: crumple 0.4s ease-in forwards; }
```

## Phase 2: Temporal & Neural Core
### Overview
Upgrade the brain of the app.

### Changes Required:
#### 1. `src/App.jsx`
**Changes**: Add `undoBuffer` state. Wrap mutation functions (`deleteTodo`, `editTodo`) to save state before acting.
```javascript
const [history, setHistory] = useState(null);
const pushHistory = () => setHistory(JSON.parse(JSON.stringify(todos)));
const undo = () => { if (history) { setTodos(history); setHistory(null); audio.playRustle(); } };
```

#### 2. `src/App.jsx`
**Changes**: Add `useEffect` for global keydown events.
```javascript
useEffect(() => {
  const handleKey = (e) => {
    if (e.ctrlKey && e.key === 'z') undo();
    if (e.key === 'j') /* move selection down */
    if (e.key === 'k') /* move selection up */
  };
  window.addEventListener('keydown', handleKey);
  return () => window.removeEventListener('keydown', handleKey);
}, [todos, history, selectedTodoId]);
```

### Success Criteria:
#### Automated:
- [ ] `bun run build`
#### Manual:
- [ ] **Shortcuts**: Navigate the sidebar using `j/k`, select with `Enter`.
- [ ] **Temporal**: Delete a task, hit `Ctrl+Z`, verify it returns.
- [ ] **Acoustic**: Hear synthesized scritches when editing.
