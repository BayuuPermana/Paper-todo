# Graphite Heatmap & Streaks Implementation Plan

## Overview
Implement a persistent activity log that tracks daily points (Task=3, Subtask=1). Use this data to render a graphite heatmap on the calendar and display a current streak counter.

## Current State Analysis
- `App.jsx`: Manages `todos` but no historical data.
- `PaperCalendar.jsx`: Renders days with a static background.

## Implementation Approach
1. **Log Engine**: Add `activityLog` state to `App.jsx`. Update toggles to track points.
2. **Streak Engine**: Create a helper to calculate current streak from `activityLog`.
3. **UI Overlay**:
    - Update `PaperCalendar` to accept `activityData` prop.
    - Map points to grey intensities.
    - Add `StreakCounter` header above the calendar.

## Phase 1: Data & Scoring (heat-001, heat-002)
### Overview
Establish the persistent log and calculation logic.

### Changes Required:
#### 1. `src/App.jsx`
**Changes**: Add log state and update handlers.
```javascript
const LOG_KEY = 'paper-activity-log';
const [activityLog, setActivityLog] = useState(() => {
  const saved = localStorage.getItem(LOG_KEY);
  return saved ? JSON.parse(saved) : {};
});

const logActivity = (pts) => {
  const today = new Date().toLocaleDateString('en-CA');
  const newLog = { ...activityLog };
  newLog[today] = (newLog[today] || 0) + pts;
  setActivityLog(newLog);
  localStorage.setItem(LOG_KEY, JSON.stringify(newLog));
};
```

## Phase 2: UI & Heatmap (heat-003)
### Overview
Visualize the intensity on the calendar.

### Changes Required:
#### 1. `src/PaperCalendar.jsx`
**Changes**: Map points to background colors.
```jsx
const getIntensity = (pts) => {
  if (!pts) return 'transparent';
  if (pts < 3) return '#eee'; // Light
  if (pts < 6) return '#ccc'; // Medium
  if (pts < 10) return '#888'; // Dark
  return '#333'; // Solenya
};
```

### Success Criteria:
#### Automated:
- [ ] `bun run build`
#### Manual:
- [ ] **Logging**: Check subtask, verify intensity on today's calendar square changes.
- [ ] **Intensity**: Check multiple tasks, verify square gets darker.
- [ ] **Streak**: Work 2 days in a row, verify streak counter shows '2 Days'.
