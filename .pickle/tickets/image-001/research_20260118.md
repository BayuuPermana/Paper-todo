# Research: God Mode Image Compression & Ingestion

**Date**: 2026-01-18

## 1. Executive Summary
Storing visual data in a text-based environment (localStorage) requires extreme efficiency. We will implement a client-side compression pipeline using the HTML5 Canvas API to ensure images are stored as low-footprint Base64 strings.

## 2. Technical Context
- **Storage**: `localStorage` (limit ~5MB).
- **Component**: `src/AddTodo.jsx`.
- **Logic**: No current image handling exists.

## 3. Findings & Analysis
- **Compression Pipeline**:
    1. `FileReader.readAsDataURL(file)`
    2. `Image.onload`
    3. `Canvas.drawImage` (with aspect ratio preserving resize to max 400px)
    4. `Canvas.toDataURL('image/jpeg', 0.7)` (aggressive quality reduction)
- **Data Model**: The `todo` object will be updated to include an `image` field (string).
- **Aesthetic Integration**: `AddTodo` needs a file picker that fits the hand-drawn theme.

## 4. Technical Constraints
- **Asynchronicity**: `FileReader` and `Image.onload` are async. `onAdd` must be triggered after processing.
- **Space Capping**: 400px at 0.7 quality usually results in ~15-30KB per image, allowing for ~150+ tasks before hitting limits.

## 5. Architecture Documentation
- Utility: `src/utils/ImageProcessor.js`.
- Component: `AddTodo.jsx`.
