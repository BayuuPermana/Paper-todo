# Visual Evidence Protocol Implementation Plan

## Overview
Implement image attachments for tasks. Includes a compression utility, an upload UI in the sidebar, a hover preview in the sidebar, and a 'taped' image display in the workspace.

## Current State Analysis
- `AddTodo.jsx`: Simple text input.
- `TaskSidebar.jsx`: Text-heavy project list.
- `App.jsx`: State management for todos.

## Implementation Approach
1. **Compression Logic**: Create `src/utils/ImageProcessor.js` using Canvas.
2. **Intake UI**: Update `AddTodo.jsx` with file input and state.
3. **Workspace Display**: Update `TodoList.jsx`/`TodoItem.jsx` to render the image with tape styles.
4. **Sidebar Hover**: Update `TaskSidebar.jsx` with thumbnail and preview logic.

## Phase 1: Ingestion & Compression (image-001)
### Overview
Establish the pipeline for crushing images into efficient strings.

### Changes Required:
#### 1. `src/utils/ImageProcessor.js` (New File)
**Changes**: God Mode canvas compressor.
```javascript
export const processImage = (file) => {
  return new Promise((resolve) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = (e) => {
      const img = new Image();
      img.src = e.target.result;
      img.onload = () => {
        const canvas = document.createElement('canvas');
        const MAX_SIZE = 400;
        let w = img.width;
        let h = img.height;
        if (w > h) { if (w > MAX_SIZE) { h *= MAX_SIZE / w; w = MAX_SIZE; } }
        else { if (h > MAX_SIZE) { w *= MAX_SIZE / h; h = MAX_SIZE; } }
        canvas.width = w; canvas.height = h;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, w, h);
        resolve(canvas.toDataURL('image/jpeg', 0.7));
      };
    };
  });
};
```

## Phase 2: Workspace Aesthetic (image-002)
### Overview
Make the images look physically present.

### Changes Required:
#### 1. `src/index.css`
**Changes**: Add tape textures.
```css
.taped-image-container {
  position: relative;
  padding: 20px;
  background: white;
  box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.tape {
  position: absolute;
  width: 80px; height: 30px;
  background: rgba(255, 255, 200, 0.5); /* Washi tape look */
  box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}
```

## Phase 3: Sidebar Preview (image-003)
### Overview
Add the hover magic to the rack.

### Success Criteria:
#### Automated:
- [ ] `bun run build`
#### Manual:
- [ ] **Upload**: Attach image, verify task created.
- [ ] **Preview**: Hover over thumbnail in sidebar, see larger popup.
- [ ] **Aesthetic**: Verify image looks 'taped' in the main area.
