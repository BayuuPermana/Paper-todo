# Research: Subtask Drag-and-Drop Reordering

**Date**: 2026-01-19

## 1. Executive Summary
The application currently has a global `DragDropContext` in `App.jsx` that only handles top-level todo reordering in the sidebar. Subtasks in `TodoItem.jsx` are rendered as a static list and lack `Droppable`/`Draggable` wrappers. Reordering logic for subtasks is missing from the `handleDragEnd` function.

## 2. Technical Context
- `App.jsx:132`: `handleDragEnd` only handles top-level `todos` reordering.
- `TodoItem.jsx:115`: Subtasks are mapped directly without DnD components.
- `App.jsx:435`: `DragDropContext` wraps the sidebar but not the subtask area in a way that allows sub-list reordering.

## 3. Findings & Analysis
- **Context Scope**: `DragDropContext` needs to handle multiple droppable areas: the sidebar and the active todo's subtask list.
- **Identifier Conflict**: We must ensure `droppableId` for subtasks is unique (e.g., `subtasks-${todo.id}`).
- **State Update**: `handleDragEnd` needs to distinguish between a sidebar drag and a subtask drag using the `source.droppableId`.

## 4. Technical Constraints
- `react-beautiful-dnd` requires all draggables to be within a `DragDropContext`. Since subtasks are in the main area and todos are in the sidebar, they can share the context if it's placed high enough, but they are separate lists.

## 5. Architecture Documentation
- Current DnD uses `StrictModeDroppable` for React 18 compatibility.
- `todos` state is a flat array where each todo has a `subTasks` array.
