# Fix Drag and Drop Snap-Back Implementation Plan

## Overview
Resolve the issue where dragging items in the Mobile Sidebar snaps them back to their original position. This is caused by `react-beautiful-dnd` initializing while the sidebar is hidden (`display: none`), resulting in incorrect dimension measurements.

## Current State Analysis
- `App.jsx`: Renders `TaskSidebar` wrapped in `DragDropContext`.
- `index.css`: Uses `display: none` for the `.mobile-hide` class when `activeTab` is not 'archive'.
- `react-beautiful-dnd`: Fails to measure `Droppable` areas correctly if they are hidden on mount.

## Implementation Approach
- Force `DragDropContext` to re-mount (and thus re-measure) whenever the `activeTab` changes.
- This ensures that when the user switches to the 'Archive' tab, the DnD context initializes *after* the element becomes visible (or simultaneous with the render that makes it visible).

## Phase 1: Force Remount on Tab Change
### Overview
Add a `key` prop to the `DragDropContext` or its container to force re-initialization on tab switch.

### Changes Required:
#### 1. `src/App.jsx`
**Changes**:
- Add `key={activeTab}` to the `DragDropContext` component wrapping `TaskSidebar`.

```jsx
<DragDropContext onDragEnd={handleDragEnd} key={activeTab}>
  <TaskSidebar ... />
</DragDropContext>
```

### Success Criteria:
#### Manual:
- [ ] On Mobile: Open app (Focus tab default). Switch to Archive tab. Drag an item. It should drop and reorder.
- [ ] On Desktop: Dragging still works.

## Finalize
- [ ] Verify functionality.
